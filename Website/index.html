<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="styles.css" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Chivo+Mono:wght@300&display=swap" rel="stylesheet">
<html>
    <head>
        <title>Triangulum</title>
        <link rel="icon" type="image/x-icon" href="https://firebasestorage.googleapis.com/v0/b/triangulum-32bdb.appspot.com/o/triangulumIcon.png?alt=media&token=996dd237-3cf2-4e87-b2cf-e3a0668a8a04">
    </head>
    <header>
        <div id="title">
            <center><h1 style="text-shadow: 0 0 20px #ffffffde;">Triangulum</h1></center>
        </div>
      </header>
    <hr id="divider">
    <navigation>
        <a href="index.html"><button>Home</button></a>
        <a href="game.html"><button>Game</button></a>
        <a href="https://discord.gg/aJFF526veg"><button>Discord Server</button></a>
        <a href="/developers.html" class="nav-link"><button>Developers</button></a>
        <label class="switchLabel">flashlight</label>
        <div class="switch">
          <label class="switch">
            <input type="checkbox" id="flashlight">
            <span class="slider round"></span>
          </label>
        </div>
    </navigation>
    <h2>Development Progress</h2>
    <hr id="divider">
    <div id="mainItems">
        
    </div>
    <div id="torch-container">
        <div id="torch">
          <img class="torch" src="torchlight.png" alt="Torch">
        </div>
        <div id="torch-overlay"></div>
      </div>
</html>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function(event) {
  var torch = document.getElementById("torch");
  var flashlightSwitch = document.getElementById("flashlight");
  var torchImage = document.querySelector("#torch img");

  var scrollY = window.pageYOffset || document.documentElement.scrollTop;

  document.addEventListener("mousemove", function(event) {
    var x = event.clientX;
    var y = event.clientY + scrollY;
    var offsetX = 45;
    var offsetY = -torch.offsetHeight / 2;

    if (flashlightSwitch.checked) {
      // Calculate the rotation angle based on mouse position
      var screenWidth = window.innerWidth;
      var degreeRange = 30;
      var angle = (x / screenWidth - 0.5) * degreeRange;

      // Apply rotation and translation to the torch element
      torch.style.transform = "translate(" + (x - offsetX) + "px, " + (y + offsetY) + "px) rotate(" + angle + "deg)";

      // Show the torch image
      torchImage.style.display = "block";
    } else {
      // Hide the torch image
      torchImage.style.display = "none";
    }
  });

  window.addEventListener("scroll", function() {
    scrollY = window.pageYOffset || document.documentElement.scrollTop;
  });
});
</script>
<script>
  // Initialize Firebase
  var firebaseConfig = {
    apiKey: "AIzaSyB2uv4i5msSyZlaXCKSGo3CHDHdSucGj0I",
  authDomain: "triangulum-32bdb.firebaseapp.com",
  projectId: "triangulum-32bdb",
  storageBucket: "triangulum-32bdb.appspot.com",
  messagingSenderId: "738797411762",
  appId: "1:738797411762:web:ab49944b91dfa4352cd8ab",
  measurementId: "G-DWJ58NKP04"
  };
  firebase.initializeApp(firebaseConfig);

  // Retrieve data from Firestore
  var firestore = firebase.firestore();
  var collectionRef = firestore.collection('versions');

  collectionRef.orderBy('timestamp', 'desc').onSnapshot(function(snapshot) {
    // Delete existing content
    var mainItemsContainer = document.getElementById('mainItems');
    while (mainItemsContainer.firstChild) {
      mainItemsContainer.removeChild(mainItemsContainer.firstChild);
    }

    // Generate dynamic <div> elements
    snapshot.forEach(function(doc) {
      var item = doc.data();

      var div = document.createElement('div');
      div.setAttribute('class', 'item');

      var p = document.createElement('p');
      p.textContent = item.features;

      var hr = document.createElement('hr');
      hr.setAttribute('id', 'item');

      var h6 = document.createElement('h6');
      h6.textContent = item.version;

      div.appendChild(p);
      div.appendChild(hr);
      div.appendChild(h6);

      mainItemsContainer.appendChild(div);
    });
  });
</script>
